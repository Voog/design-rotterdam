!function(e){e.fn.autogrow=function(t){return this.filter("textarea").each(function(){var t=this,o=e(t),i=o.height(),n=o.hasClass("autogrow-short")?0:parseInt(o.css("lineHeight"))||0,a=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:o.width(),fontSize:o.css("fontSize"),fontFamily:o.css("fontFamily"),fontWeight:o.css("fontWeight"),lineHeight:o.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),r=function(e){var r=function(e,t){for(var o=0,i="";o<t;o++)i+=e;return i},s=t.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(e){return r("&nbsp;",e.length-1)+" "});e&&e.data&&"keydown"===e.data.event&&13===e.keyCode&&(s+="<br />"),a.css("width",o.width()),a.html(s+(0===n?"...":"")),o.height(Math.max(a.height()+n,i))};o.change(r).keyup(r).keydown({event:"keydown"},r),e(window).resize(r),r()})}}(jQuery);var MMCQ,PriorityQueue;PriorityQueue=function(){function e(e){this.comparator=e,this.contents=[],this.sorted=!1}return e.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},e.prototype.push=function(e){return this.contents.push(e),this.sorted=!1},e.prototype.peek=function(e){return null==e&&(e=this.contents.length-1),this.sorted||this.sort(),this.contents[e]},e.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},e.prototype.size=function(){return this.contents.length},e.prototype.map=function(e){return this.contents.map(e)},e}(),MMCQ=function(){function e(){this.maxIterations=1e3,this.fractByPopulations=.75}var t,o,i,n,a,r;return e.sigbits=5,e.rshift=8-e.sigbits,n=function(t,o,i){return(t<<2*e.sigbits)+(o<<e.sigbits)+i},t=function(){function t(e,t,o,i,n,a,r){this.r1=e,this.r2=t,this.g1=o,this.g2=i,this.b1=n,this.b2=a,this.histo=r}return t.prototype.volume=function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(e){var t,o,i,a,r,s,d,c,l,h,g;if(!this._count_set||e){for(a=0,r=s=this.r1,l=this.r2;s<=l;r=s+=1)for(o=d=this.g1,h=this.g2;d<=h;o=d+=1)for(t=c=this.b1,g=this.b2;c<=g;t=c+=1)i=n(r,o,t),a+=this.histo[i]||0;this._count_set=!0,this._count=a}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,i,a,r,s,d,c,l,h,g,u,f,m,p,b,v;if(!this._average||t){for(c=1<<8-e.sigbits,g=0,h=0,r=0,i=0,l=u=this.r1,p=this.r2;u<=p;l=u+=1)for(a=f=this.g1,b=this.g2;f<=b;a=f+=1)for(o=m=this.b1,v=this.b2;m<=v;o=m+=1)d=n(l,a,o),g+=s=this.histo[d]||0,h+=s*(l+.5)*c,r+=s*(a+.5)*c,i+=s*(o+.5)*c;this._average=g?[~~(h/g),~~(r/g),~~(i/g)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,i,n;return n=t[0]>>e.rshift,i=t[1]>>e.rshift,o=t[2]>>e.rshift,this.r1<=n&&n<=this.r2&&this.g1<=i&&i<=this.g2&&this.b1<=o&&o<=this.b2},t}(),o=function(){function e(){this.cboxes=new PriorityQueue(function(e,t){var o,i;return o=e.count()*e.volume(),i=t.count()*t.volume(),o>i?1:o<i?-1:0})}return e.prototype.push=function(e){return this.cboxes.push({cbox:e,color:e.average()})},e.prototype.palette=function(){return this.cboxes.map(function(e){return e.color})},e.prototype.size=function(){return this.cboxes.size()},e.prototype.map=function(e){var t,o,i;for(t=o=0,i=this.cboxes.size();o<i;t=o+=1)return this.cboxes.peek(t).cbox.contains(e)?this.cboxes.peek(t).color:this.nearest(e)},e.prototype.cboxes=function(){return this.cboxes},e.prototype.nearest=function(e){var t,o,i,n,a,r,s;for(a=function(e){return e*e},i=1e9,o=r=0,s=this.cboxes.size();r<s;o=r+=1)(t=Math.sqrt(a(e[0]-this.cboxes.peek(o).color[0])+a(e[1]-this.cboxes.peek(o).color[1])+a(e[2]-this.cboxes.peek(o).color[2])))<i&&(i=t,n=this.cboxes.peek(o).color);return n},e}(),a=function(t){var o,i,a,r,s,d,c,l,h;for(r=1<<3*e.sigbits,a=new Array(r),l=0,h=t.length;l<h;l++)c=(d=t[l])[0]>>e.rshift,i=d[1]>>e.rshift,o=d[2]>>e.rshift,a[s=n(c,i,o)]=(a[s]||0)+1;return a},i=function(o,i){var n,a,r,s,d,c,l,h,g,u,f,m;for(u=1e6,g=0,c=1e6,d=0,r=1e6,a=0,f=0,m=o.length;f<m;f++)h=(l=o[f])[0]>>e.rshift,s=l[1]>>e.rshift,n=l[2]>>e.rshift,h<u?u=h:h>g&&(g=h),s<c?c=s:s>d&&(d=s),n<r?r=n:n>a&&(a=n);return new t(u,g,c,d,r,a,i)},r=function(e,t){var o,i,a,r,s,d,c,l,h,g,u,f,m,p,b,v,C,w,y,x,k,_,j,A,B,M,P,z,I,T;if(t.count()){if(1===t.count())return[t.copy()];if(g=t.r2-t.r1+1,s=t.g2-t.g1+1,i=t.b2-t.b1+1,c=Math.max(g,s,i),f=0,l=[],d=[],c===g)for(h=m=t.r1,_=t.r2;m<=_;h=m+=1){for(u=0,r=p=t.g1,P=t.g2;p<=P;r=p+=1)for(o=b=t.b1,z=t.b2;b<=z;o=b+=1)u+=e[n(h,r,o)]||0;f+=u,l[h]=f}else if(c===s)for(r=v=t.g1,I=t.g2;v<=I;r=v+=1){for(u=0,h=C=t.r1,T=t.r2;C<=T;h=C+=1)for(o=w=t.b1,j=t.b2;w<=j;o=w+=1)u+=e[n(h,r,o)]||0;f+=u,l[r]=f}else for(o=y=t.b1,A=t.b2;y<=A;o=y+=1){for(u=0,h=x=t.r1,B=t.r2;x<=B;h=x+=1)for(r=k=t.g1,M=t.g2;k<=M;r=k+=1)u+=e[n(h,r,o)]||0;f+=u,l[o]=f}return l.forEach(function(e,t){return d[t]=f-e}),a=function(e){var o,i,n,a,r,s,c,h,g,u,m;for(s=e+"2",c=u=t[r=e+"1"],m=t[s];u<=m;c=u+=1)if(l[c]>f/2){for(o=t.copy(),i=t.copy(),a=(h=c-t[r])<=(g=t[s]-c)?Math.min(t[s]-1,~~(c+g/2)):Math.max(t[r],~~(c-1-h/2));!l[a];)a++;for(n=d[a];!n&&l[a-1];)n=d[--a];return o[s]=a,i[r]=o[s]+1,[o,i]}},c===g?a("r"):c===s?a("g"):c===i?a("b"):void 0}},e.prototype.quantize=function(e,t){var n,s,d,c,l,h,g=this;if(!e.length||t<2||t>256)return console.log("invalid arguments"),!1;for(d=a(e),n=i(e,d),(l=new PriorityQueue(function(e,t){var o,i;return o=e.count(),i=t.count(),o>i?1:o<i?-1:0})).push(n),(c=function(e,t){var o,i,a,s,c;for(s=1,c=0;c<g.maxIterations;)if((n=e.pop()).count()){if(a=r(d,n),o=a[0],i=a[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(e.push(o),i&&(e.push(i),s++),s>=t)return;if(c++>g.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else e.push(n),c++})(l,this.fractByPopulations*t),h=new PriorityQueue(function(e,t){var o,i;return o=e.count()*e.volume(),i=t.count()*t.volume(),o>i?1:o<i?-1:0});l.size();)h.push(l.pop());for(c(h,t-h.size()),s=new o;h.size();)s.push(h.pop());return s},e}.call(this),function(){window.ColorExtract=function(){function e(){}return e.getColorMap=function(e,t,o,i,n,a){var r,s,d,c,l,h,g,u,f,m;for(null==a&&(a=8),d=e.getContext("2d").getImageData(t,o,i,n).data,c=[],h=g=o,f=o+n;g<f;h=g+=1)for(s=h*i*4,l=u=t,m=t+i;u<m;l=u+=1)r=s+4*l,c.push([d[r],d[r+1],d[r+2]]);return(new MMCQ).quantize(c,a)},e.colorDist=function(e,t){var o;return(o=function(e){return e*e})(e[0]-t[0])+o(e[1]-t[1])+o(e[2]-t[2])},e.extract=function(t,o,i){var n,a,r,s,d,c,l,h,g,u,f,m,p;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(a=e.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),n=a[0].rgb,(l=e.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),h=0,u=0,m=l.length;u<m;u++)r=l[u],(s=e.colorDist(n,r.rgb))>h&&(h=s,d=r.rgb);for(h=0,f=0,p=l.length;f<p;f++)r=l[f],(s=e.colorDist(n,r.rgb))>h&&r.rgb!==d&&(h=s,c=r.rgb);return g=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},i({bgColor:g(n),fgColor:g(d),fgColor2:g(c)})},e}()}.call(this),function(e){var t="placeholder"in document.createElement("input"),o=["-moz-box-sizing","-webkit-box-sizing","box-sizing","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","border-top-width","border-right-width","border-bottom-width","border-left-width","line-height","font-size","font-family","width","height","top","left","right","bottom"],i=function(t,i){function n(){h.toggle(!e.trim(g.val()).length)}var a,r,s,d,c,l,h,g=e(t);try{if(!g[0].getAttributeNode("placeholder"))return;if(!(r=g[0].getAttribute("placeholder"))||!r.length)return;g[0].setAttribute("placeholder",""),g.data("placeholder",r)}catch(e){return}for(s={},a=0;a<o.length;a++)s[o[a]]=g.css(o[a]);d=parseInt(g.css("z-index"),10),!isNaN(d)&&d||(d=1),(h=e("<span>").addClass("placeholder").html(r)).css(s),h.css({cursor:g.css("cursor")||"text",display:"block",position:"absolute",overflow:"hidden","z-index":d+1,background:"none","border-top-style":"solid","border-right-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-top-color":"transparent","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"transparent"}),h.insertBefore(g),l=g.offset().top-h.offset().top,c=parseInt(h.css("margin-top")),isNaN(c)&&(c=0),h.css("margin-top",c+l),h.on("mousedown",function(){g.is(":enabled")&&window.setTimeout(function(){g.trigger("focus")},0)}),g.on("focus.placeholder",function(){h.hide()}),g.on("blur.placeholder",function(){n()}),g[0].onpropertychange=function(){"value"===event.propertyName&&n()},g.trigger("blur.placeholder")};e.fn.placeholder=function(e){var o=this;return e=e||{},t&&!e.force?this:(window.setTimeout(function(){o.each(function(){var e=this.tagName.toLowerCase();"input"!==e&&"textarea"!==e||i(this)})},0),this)}}(jQuery),function(e){var t=function(t){this.$el=e(t),this.init()};t.prototype={init:function(){e(".form_field").each(e.proxy(function(t,o){e(o).find('input[type="text"]').length>0&&(e(o).find('input[type="text"]').attr("placeholder",e(o).find("label").text()),e(o).find("label").hide(),e.fn.placeholder&&e(o).find('input[type="text"]').placeholder()),e(o).find("textarea").length>0&&(e(o).find("textarea").attr("placeholder",e(o).find("label").text()),e(o).find("label").hide(),e.fn.placeholder&&e(o).find("textarea").placeholder())},this))}},e.fn.edicyFormPlaceholders=function(){return this.each(function(){e(this).data("edicyFormPlaceholders")||e(this).data("edicyFormPlaceholders",new t(this))})}}(jQuery),function(e){var t=e("html").hasClass("editmode"),o=function(){var t=e(".js-header-inner").width(),o=e(".js-header-right"),i=o.width(),n=parseInt(o.css("margin-left"))+1;e(".js-header-left").css("min-width",t-i-n)},i=function(){t||e.each(e(".content-formatted table"),function(){e(this).wrap('<div class="table-container"></div>')})},n=function(){e(".js-menu-toggle").click(function(){e(this).toggleClass("open"),e(".mobile-menu").toggleClass("expanded"),e(this).hasClass("open")?e(".js-search").addClass("hidden"):e(".js-search").removeClass("hidden")})},a=function(){e("#lang-menu-toggle").click(function(t){t.stopPropagation(),e(this).toggleClass("open"),e("#toggleable-lang-menu").toggleClass("expanded")}),e("body").on("click",function(t){var o=e(t.target);0!==o.closest(".toggleable-lang-menu").length||o.is("#toggleable-lang-menu")||(e("#toggleable-lang-menu").removeClass("expanded"),e("body").removeClass("voog-search-visible")),e("#lang-menu-toggle").removeClass("open")})},r=function(){e("html").click(function(t){var o=e(t.target);0===o.closest(".mobile-menu").length&&0===o.closest(".toggle-btn").length&&e(".mobile-menu").hasClass("expanded")&&(e(".mobile-menu").removeClass("expanded"),e(".js-menu-toggle").removeClass("open"),e(".js-menu-toggle").hasClass("open")||e(".js-search").removeClass("hidden"))})},s=function(){e(".js-search-reset").click(function(t){t.preventDefault(),e("body").removeClass("voog-search-visible")}),e(".js-search-open").click(function(t){t.stopPropagation(),e("body").addClass("voog-search-visible"),e(".js-search-input").val("").focus()}),e(".js-search-close").click(function(t){e("body").removeClass("voog-search-visible")}),e(".js-search-input").click(function(e){e.stopPropagation()}),e(".js-voog-search-modal-inner").click(function(e){e.stopPropagation()})},d=function(){},c=function(e,t){for(var o,i=0,n=e.length;i<n;i++){if(e[i].width<t)return o||e[i];o=e[i]}return e[e.length-1]},l=function(e,t){for(var o=e.length;o--;)if(t.indexOf(e[o].url.trim())>-1)return!0;return!1},h=function(){headerBgCombinedLightness>=.5?e(".js-background-type").addClass("light-background").removeClass("dark-background"):e(".js-background-type").addClass("dark-background").removeClass("light-background")},g=function(t,o){if(t&&o){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,o){t[e]=+o})),"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(o,function(e,t){o[e]=+t})),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1);var i=[0,0,0,0];return i[3]=1-(1-o[3])*(1-t[3]),0===i[3]&&(i[3]=1e-6),i[0]=Math.min(o[0]*o[3]/i[3]+t[0]*t[3]*(1-o[3])/i[3],255),i[1]=Math.min(o[1]*o[3]/i[3]+t[1]*t[3]*(1-o[3])/i[3],255),i[2]=Math.min(o[2]*o[3]/i[3]+t[2]*t[3]*(1-o[3])/i[3],255),e.map(i,function(e){return Math.floor(e)})}},u=function(e,t){return g(e||[255,255,255,1],t||[255,255,255,1])},f=function(e,t){var o=u(e,t);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},m=function(){e(window).ready(function(){e(".post").each(function(t,o){var i=e(o),n=i.find(".post-header").height();i.find(".post-content").css("min-height",n)})})},p=function(){e(document).ready(function(){e(".comment-form").hasClass("form_with_errors")?e("html, body").scrollTop(e(".comment-form").offset().top):e("form").find(".form_error, .form_notice").length>0&&e("html, body").scrollTop(e(".form_error, .form_notice").closest("form").offset().top)})},b=function(t){var o,i,n,a,r=t.stickyHeader||!1,s=t.stickyMobileMenu||!1,d=t.stickyFooter||!1,c=t.stickyPostHeaders||!1,l=e(".container"),h=e(".header"),g=e(".footer"),u=e(h).height()+90,f=e(g).height()+90,m=0,p=!1,b=function(){var t=[];return e(".post").each(function(e,o){t.push(o.getBoundingClientRect().top)}),t},v=function(t){o?(i=e(window).scrollTop(),n=i-o,window.innerWidth<640&&s&&(n>5&&o>u?e(".topbar").addClass("fixed").css({top:-u}):n<-5&&o>u?e(".topbar").addClass("fixed").css({top:0}):n<0&&o<=100&&!0===e(".topbar").hasClass("fixed")&&(e(l).css({"margin-top":0}),e(".topbar").removeClass("fixed"))),window.innerWidth>640&&d&&(e(".post").eq(0).offset().top-e(window).innerHeight()+90<e(document).scrollTop()&&o+window.innerHeight<=e(document).height()-f-40?n<-5?_(!1):n>5&&x():k()),r&&e(h).find(".header-inner").height()<60&&(n>5&&o>u?C():n<-5&&o>u?(w(),setTimeout(function(){e(window).scrollTop()<=u&&y()},20)):n<-5&&o<=u&&y()),o=0):o=e(window).scrollTop(),window.innerWidth>640&&c&&e(".post").each(function(o,i){var n=e(i).find(".post-header"),a=-(e(i).height()-30-n.height());t[o]<30?t[o]>a?(n.removeClass("top bottom"),e(i).addClass("fixed-header")):(n.addClass("bottom").removeClass("top"),e(i).removeClass("fixed-header")):(n.addClass("top").removeClass("bottom"),e(i).removeClass("fixed-header"))})},C=function(){e(h).addClass("header-fixed").css({top:-u}),e(l).css({"padding-top":u})},w=function(){var t;t=e("body").hasClass("edy-checkout-button-visible")?e(".edy-ecommerce-shopping-cart-button").outerHeight():0,e(h).addClass("header-fixed header-animated").css({top:t}),e(l).css({"padding-top":u})},y=function(){e(h).removeClass("header-fixed header-animated"),e(l).css({"padding-top":0}),e(".post.fixed-header").removeClass("fixed-header")},x=function(){e(g).addClass("footer-fixed footer-animated footer-hidden"),e(g).css("bottom",-e(g).outerHeight())},k=function(){e(g).removeClass("footer-fixed footer-animated footer-hidden"),e("body").removeClass("voog-search-visible"),e(g).css({bottom:"",left:""}),e(l).css({"margin-bottom":""})},_=function(t){t=t||!1,e(g).addClass("footer-fixed footer-animated"),e(g).css({left:e(".container").offset().left,bottom:t?0:60-e(g).height()}),e(l).css({"margin-bottom":f})},j=function(t){t?e(g).hasClass("footer-fixed")&&(clearTimeout(a),_(!0),e("footer .gradient-overlay").hide()):e("footer").hasClass("footer-fixed")&&(a=setTimeout(function(){_(!1),e("footer .gradient-overlay").show()},1500))},A=function(){p||requestAnimationFrame(B),p=!0},B=function(){p=!1,e(window).width()>640&&v(b())};e(window).on("load resize",function(){e(window).width()>640?v(b()):(e(".container").css({"padding-top":"","margin-bottom":""}),e(".header-fixed").removeClass("header-fixed header-animated").css("top",""))}).on("scroll",function(){m=window.scrollY,A()}),e("footer").bind("mouseenter",function(){j(!0)}).bind("mouseleave",function(){j(!1)})},v=function(e,t,o){var i=e.find(".js-content-item-img-drop-area"),n=e.find(".js-toggle-crop-state");t>o?i.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):t===o?i.removeClass("image-landscape image-square image-portrait").addClass("image-square"):i.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),i.hasClass("image-square")?n.removeClass("is-visible").addClass("is-hidden"):n.removeClass("is-hidden").addClass("is-visible")},C=function(t,o,i,n,a){var r="article"===a?"articles":"pages",s=new Edicy.CustomData({type:a,id:i});e.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+r+"/"+i,data:JSON.stringify({image_id:n}),dataType:"json",success:function(e){s.set("image_crop_state","not-cropped"),t.removeClass("not-loaded with-error").addClass("is-loaded"),t.find(".edy-img-drop-area-placeholder").css("opacity",1),o.css("opacity",1)},timeout:3e4,error:function(e){t.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})},w=function(){e(document).ready(function(){setTimeout(function(){e(".js-content-item-box").addClass("not-loaded")},3e3)}),e(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var t=e(this).closest(".js-content-item-box");t.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){t.removeClass("not-loaded with-error"),t.find(".js-loader").remove()},3e3)}})},t=function(){return e("html").hasClass("editmode")};window.site=e.extend(window.site||{},{initFrontPage:function(e){(e=void 0!==e&&e)&&b({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1})},initCommonPage:function(t){(t=void 0!==t&&t)&&b({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),e.fn.autogrow&&e(".form_field_textarea").autogrow(),e(window).ready(function(){e.trim(e(".content-header").get(0).innerHTML)||e(".content-header").hide()})},initBlogPage:function(e){(e=void 0!==e&&e)&&b({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!0,stickyPostHeaders:!0}),m()},initArticlePage:function(t){(t=void 0!==t&&t)&&b({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),e.fn.autogrow&&e(".form_field_textarea").autogrow()},toggleFlags:function(){e(".js-option-toggle-flags").on("click",function(t){if(t.stopPropagation(),e(this).hasClass("js-flag-disable-btn"))o=!1;else var o=!0;e(this).toggleClass("js-flag-disable-btn"),e("body").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",o)})},getImageByWidth:c,headerBgPreview:function(t,o){var i=e(".js-header-banner").css("background-image"),n=t.imageSizes?c(t.imageSizes,e(window).width()):null,a=t.image&&""!==t.image?"url("+n.url+")":"none",r=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,s=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",d=(t.colorData&&""!==t.colorData&&t.colorData.lightness,e("<img>")),g=e("<canvas>"),u=t.image&&""!==t.image?t.image:null;u?l(r,i)?(headerBg.headerBgImageColor=headerBg.headerBgImageColor?headerBg.headerBgImageColor:"rgba(178,198,207,1)",headerBgCombinedLightness=f(headerBg.headerBgImageColor,s),h()):(d.attr("src",u.replace(/.*\/(photos|voogstock)/g,"/photos")),d.on("load",function(){ColorExtract.extract(d[0],g[0],function(e){headerBg.headerBgImageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",headerBgCombinedLightness=f(headerBg.headerBgImageColor,s),h()})})):(headerBg.headerBgImageColor="rgba(255,255,255,1)",headerBgCombinedLightness=f(headerBg.headerBgImageColor,s),h()),e(o).css({"background-image":a}),e(o).find(".background-color").css({"background-color":s})},headerBgCommit:function(t,o){var i=e.extend(!0,{},t);i.image=t.image||"",i.imageSizes=t.imageSizes||"",i.color=t.color||"rgba(255,255,255,0)",i.combinedLightness=headerBgCombinedLightness,pageData.set(o,i)},initItemsPage:function(){t()||w()},handleHeaderColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},bindCustomTexteditorStyles:function(e){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:e,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])},bindRootItemSettings:function(t){"show_product_related_pages_in_main_menu"in t||(t.show_product_related_pages_in_main_menu=!1),e(".js-root-item-settings-toggle").each(function(o,i){new Edicy.SettingsEditor(i,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:t,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(t){1==!t.show_product_related_pages_in_main_menu?e(".js-menu-item-products").addClass("is-hidden"):e(".js-menu-item-products").removeClass("is-hidden")},commit:function(e){siteData.set("settings_root_item",e)}})})},bindContentItemImgDropAreas:function(t){e(".js-content-item-img-drop-area").each(function(o,i){var n=e(i),a=n.closest(".js-content-item-box"),r=a.data("item-id"),s=a.data("item-type");new Edicy.CustomData({type:s,id:r}),new Edicy.ImgDropArea(n,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+t+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var t;n.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(t=e.original_id,a.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),v(a,e.width,e.height)):(t=null,a.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),a.find(".edy-img-drop-area-placeholder").css("opacity",0)),C(a,n,r,t,s)}})})},bindContentItemImageCropToggle:function(){e(".js-toggle-crop-state").on("click",function(){var t,o=e(this).closest(".js-content-item-box"),i=o.find(".js-content-item-img-drop-area"),n=o.data("item-id"),a=o.data("item-type"),r=new Edicy.CustomData({type:a,id:n});i.hasClass("is-cropped")?(i.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(i.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),r.set("image_crop_state",t)})},bindSiteSearch:function(t,o,i){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:e(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:i})}}),n(),a(),r(),d(),s(),i(),p(),e(".content form").edicyFormPlaceholders(),!Modernizr.flexbox&&t&&o()}(jQuery),function(e){var t=function(t){this.$el=e(t),this.init()};t.prototype={init:function(){e(".form_field").each(e.proxy(function(t,o){e(o).find('input[type="text"]').length>0&&(e(o).find('input[type="text"]').attr("placeholder",e(o).find("label").text()),e(o).find("label").hide(),e.fn.placeholder&&e(o).find('input[type="text"]').placeholder()),e(o).find("textarea").length>0&&(e(o).find("textarea").attr("placeholder",e(o).find("label").text()),e(o).find("label").hide(),e.fn.placeholder&&e(o).find("textarea").placeholder())},this))}},e.fn.edicyFormPlaceholders=function(){return this.each(function(){e(this).data("edicyFormPlaceholders")||e(this).data("edicyFormPlaceholders",new t(this))})}}(jQuery),function(e){var t=e("html").hasClass("editmode"),o=function(){var t=e(".js-header-inner").width(),o=e(".js-header-right"),i=o.width(),n=parseInt(o.css("margin-left"))+1;e(".js-header-left").css("min-width",t-i-n)},i=function(){t||e.each(e(".content-formatted table"),function(){e(this).wrap('<div class="table-container"></div>')})},n=function(){e(".js-menu-toggle").click(function(){e(this).toggleClass("open"),e(".mobile-menu").toggleClass("expanded"),e(this).hasClass("open")?e(".js-search").addClass("hidden"):e(".js-search").removeClass("hidden")})},a=function(){e("#lang-menu-toggle").click(function(t){t.stopPropagation(),e(this).toggleClass("open"),e("#toggleable-lang-menu").toggleClass("expanded")}),e("body").on("click",function(t){var o=e(t.target);0!==o.closest(".toggleable-lang-menu").length||o.is("#toggleable-lang-menu")||(e("#toggleable-lang-menu").removeClass("expanded"),e("body").removeClass("voog-search-visible")),e("#lang-menu-toggle").removeClass("open")})},r=function(){e("html").click(function(t){var o=e(t.target);0===o.closest(".mobile-menu").length&&0===o.closest(".toggle-btn").length&&e(".mobile-menu").hasClass("expanded")&&(e(".mobile-menu").removeClass("expanded"),e(".js-menu-toggle").removeClass("open"),e(".js-menu-toggle").hasClass("open")||e(".js-search").removeClass("hidden"))})},s=function(){e(".js-search-reset").click(function(t){t.preventDefault(),e("body").removeClass("voog-search-visible")}),e(".js-search-open").click(function(t){t.stopPropagation(),e("body").addClass("voog-search-visible"),e(".js-search-input").val("").focus()}),e(".js-search-close").click(function(t){e("body").removeClass("voog-search-visible")}),e(".js-search-input").click(function(e){e.stopPropagation()}),e(".js-voog-search-modal-inner").click(function(e){e.stopPropagation()})},d=function(e,t){for(var o,i=0,n=e.length;i<n;i++){if(e[i].width<t)return o||e[i];o=e[i]}return e[e.length-1]},c=function(e,t){for(var o=e.length;o--;)if(t.indexOf(e[o].url.trim())>-1)return!0;return!1},l=function(){headerBgCombinedLightness>=.5?e(".js-background-type").addClass("light-background").removeClass("dark-background"):e(".js-background-type").addClass("dark-background").removeClass("light-background")},h=function(t,o){if(t&&o){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,o){t[e]=+o})),"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(o,function(e,t){o[e]=+t})),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1);var i=[0,0,0,0];return i[3]=1-(1-o[3])*(1-t[3]),0===i[3]&&(i[3]=1e-6),i[0]=Math.min(o[0]*o[3]/i[3]+t[0]*t[3]*(1-o[3])/i[3],255),i[1]=Math.min(o[1]*o[3]/i[3]+t[1]*t[3]*(1-o[3])/i[3],255),i[2]=Math.min(o[2]*o[3]/i[3]+t[2]*t[3]*(1-o[3])/i[3],255),e.map(i,function(e){return Math.floor(e)})}},g=function(e,t){return h(e||[255,255,255,1],t||[255,255,255,1])},u=function(e,t){var o=g(e,t);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},f=function(){e(window).ready(function(){e(".post").each(function(t,o){var i=e(o),n=i.find(".post-header").height();i.find(".post-content").css("min-height",n)})})},m=function(){e(document).ready(function(){e(".comment-form").hasClass("form_with_errors")?e("html, body").scrollTop(e(".comment-form").offset().top):e("form").find(".form_error, .form_notice").length>0&&e("html, body").scrollTop(e(".form_error, .form_notice").closest("form").offset().top)})},p=function(t){var o,i,n,a,r=t.stickyHeader||!1,s=t.stickyMobileMenu||!1,d=t.stickyFooter||!1,c=t.stickyPostHeaders||!1,l=e(".container"),h=e(".header"),g=e(".footer"),u=e(h).height()+90,f=e(g).height()+90,m=0,p=!1,b=function(){var t=[];return e(".post").each(function(e,o){t.push(o.getBoundingClientRect().top)}),t},v=function(t){o?(i=e(window).scrollTop(),n=i-o,window.innerWidth<640&&s&&(n>5&&o>u?e(".topbar").addClass("fixed").css({top:-u}):n<-5&&o>u?e(".topbar").addClass("fixed").css({top:0}):n<0&&o<=100&&!0===e(".topbar").hasClass("fixed")&&(e(l).css({"margin-top":0}),e(".topbar").removeClass("fixed"))),window.innerWidth>640&&d&&(e(".post").eq(0).offset().top-e(window).innerHeight()+90<e(document).scrollTop()&&o+window.innerHeight<=e(document).height()-f-40?n<-5?_(!1):n>5&&x():k()),r&&e(h).find(".header-inner").height()<60&&(n>5&&o>u?C():n<-5&&o>u?(w(),setTimeout(function(){e(window).scrollTop()<=u&&y()},20)):n<-5&&o<=u&&y()),o=0):o=e(window).scrollTop(),window.innerWidth>640&&c&&e(".post").each(function(o,i){var n=e(i).find(".post-header"),a=-(e(i).height()-30-n.height());t[o]<30?t[o]>a?(n.removeClass("top bottom"),e(i).addClass("fixed-header")):(n.addClass("bottom").removeClass("top"),e(i).removeClass("fixed-header")):(n.addClass("top").removeClass("bottom"),e(i).removeClass("fixed-header"))})},C=function(){e(h).addClass("header-fixed").css({top:-u}),e(l).css({"padding-top":u})},w=function(){var t;t=e("body").hasClass("edy-checkout-button-visible")?e(".edy-ecommerce-shopping-cart-button").outerHeight():0,e(h).addClass("header-fixed header-animated").css({top:t}),e(l).css({"padding-top":u})},y=function(){e(h).removeClass("header-fixed header-animated"),e(l).css({"padding-top":0}),e(".post.fixed-header").removeClass("fixed-header")},x=function(){e(g).addClass("footer-fixed footer-animated footer-hidden"),e(g).css("bottom",-e(g).outerHeight())},k=function(){e(g).removeClass("footer-fixed footer-animated footer-hidden"),e("body").removeClass("voog-search-visible"),e(g).css({bottom:"",left:""}),e(l).css({"margin-bottom":""})},_=function(t){t=t||!1,e(g).addClass("footer-fixed footer-animated"),e(g).css({left:e(".container").offset().left,bottom:t?0:60-e(g).height()}),e(l).css({"margin-bottom":f})},j=function(t){t?e(g).hasClass("footer-fixed")&&(clearTimeout(a),_(!0),e("footer .gradient-overlay").hide()):e("footer").hasClass("footer-fixed")&&(a=setTimeout(function(){_(!1),e("footer .gradient-overlay").show()},1500))},A=function(){p||requestAnimationFrame(B),p=!0},B=function(){p=!1,e(window).width()>640&&v(b())};e(window).on("load resize",function(){e(window).width()>640?v(b()):(e(".container").css({"padding-top":"","margin-bottom":""}),e(".header-fixed").removeClass("header-fixed header-animated").css("top",""))}).on("scroll",function(){m=window.scrollY,A()}),e("footer").bind("mouseenter",function(){j(!0)}).bind("mouseleave",function(){j(!1)})},b=function(e,t,o){var i=e.find(".js-content-item-img-drop-area"),n=e.find(".js-toggle-crop-state");t>o?i.removeClass("image-landscape image-square image-portrait").addClass("image-landscape"):t===o?i.removeClass("image-landscape image-square image-portrait").addClass("image-square"):i.removeClass("image-landscape image-square image-portrait").addClass("image-portrait"),i.hasClass("image-square")?n.removeClass("is-visible").addClass("is-hidden"):n.removeClass("is-hidden").addClass("is-visible")},v=function(t,o,i,n,a){var r="article"===a?"articles":"pages",s=new Edicy.CustomData({type:a,id:i});e.ajax({type:"PATCH",contentType:"application/json",url:"/admin/api/"+r+"/"+i,data:JSON.stringify({image_id:n}),dataType:"json",success:function(e){s.set("image_crop_state","not-cropped"),t.removeClass("not-loaded with-error").addClass("is-loaded"),t.find(".edy-img-drop-area-placeholder").css("opacity",1),o.css("opacity",1)},timeout:3e4,error:function(e){t.removeClass("not-loaded is-loaded with-error").addClass("with-error")}})},C=function(){e(document).ready(function(){setTimeout(function(){e(".js-content-item-box").addClass("not-loaded")},3e3)}),e(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var t=e(this).closest(".js-content-item-box");t.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){t.removeClass("not-loaded with-error"),t.find(".js-loader").remove()},3e3)}})},t=function(){return e("html").hasClass("editmode")};window.site=e.extend(window.site||{},{initFrontPage:function(e){(e=void 0!==e&&e)&&p({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1})},initCommonPage:function(t){(t=void 0!==t&&t)&&p({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),e.fn.autogrow&&e(".form_field_textarea").autogrow(),e(window).ready(function(){e.trim(e(".content-header").get(0).innerHTML)||e(".content-header").hide()})},initBlogPage:function(e){(e=void 0!==e&&e)&&p({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!0,stickyPostHeaders:!0}),f()},initArticlePage:function(t){(t=void 0!==t&&t)&&p({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),e.fn.autogrow&&e(".form_field_textarea").autogrow()},toggleFlags:function(){e(".js-option-toggle-flags").on("click",function(t){if(t.stopPropagation(),e(this).hasClass("js-flag-disable-btn"))o=!1;else var o=!0;e(this).toggleClass("js-flag-disable-btn"),e("body").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",o)})},getImageByWidth:d,headerBgPreview:function(t,o){var i=e(".js-header-banner").css("background-image"),n=t.imageSizes?d(t.imageSizes,e(window).width()):null,a=t.image&&""!==t.image?"url("+n.url+")":"none",r=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,s=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",h=(t.colorData&&""!==t.colorData&&t.colorData.lightness,e("<img>")),g=e("<canvas>"),f=t.image&&""!==t.image?t.image:null;f?c(r,i)?(headerBg.headerBgImageColor=headerBg.headerBgImageColor?headerBg.headerBgImageColor:"rgba(178,198,207,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,s),l()):(h.attr("src",f.replace(/.*\/(photos|voogstock)/g,"/photos")),h.on("load",function(){ColorExtract.extract(h[0],g[0],function(e){headerBg.headerBgImageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,s),l()})})):(headerBg.headerBgImageColor="rgba(255,255,255,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,s),l()),e(o).css({"background-image":a}),e(o).find(".background-color").css({"background-color":s})},headerBgCommit:function(t,o){var i=e.extend(!0,{},t);i.image=t.image||"",i.imageSizes=t.imageSizes||"",i.color=t.color||"rgba(255,255,255,0)",i.combinedLightness=headerBgCombinedLightness,pageData.set(o,i)},initItemsPage:function(){t()||C()},handleHeaderColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},bindCustomTexteditorStyles:function(e){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:e,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])},bindRootItemSettings:function(t){"show_product_related_pages_in_main_menu"in t||(t.show_product_related_pages_in_main_menu=!1),e(".js-root-item-settings-toggle").each(function(o,i){new Edicy.SettingsEditor(i,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:t,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(t){1==!t.show_product_related_pages_in_main_menu?e(".js-menu-item-products").addClass("is-hidden"):e(".js-menu-item-products").removeClass("is-hidden")},commit:function(e){siteData.set("settings_root_item",e)}})})},bindContentItemImgDropAreas:function(t){e(".js-content-item-img-drop-area").each(function(o,i){var n=e(i),a=n.closest(".js-content-item-box"),r=a.data("item-id"),s=a.data("item-type");new Edicy.CustomData({type:s,id:r}),new Edicy.ImgDropArea(n,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+t+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var t;n.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(t=e.original_id,a.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),b(a,e.width,e.height)):(t=null,a.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),a.find(".edy-img-drop-area-placeholder").css("opacity",0)),v(a,n,r,t,s)}})})},bindContentItemImageCropToggle:function(){e(".js-toggle-crop-state").on("click",function(){var t,o=e(this).closest(".js-content-item-box"),i=o.find(".js-content-item-img-drop-area"),n=o.data("item-id"),a=o.data("item-type"),r=new Edicy.CustomData({type:a,id:n});i.hasClass("is-cropped")?(i.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(i.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),r.set("image_crop_state",t)})},bindSiteSearch:function(t,o,i){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:e(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:i})}}),n(),a(),r(),s(),i(),m(),e(".content form").edicyFormPlaceholders(),!Modernizr.flexbox&&t&&o()}(jQuery),function(){for(var e=0,t=["ms","moz","webkit","o"],o=0;o<t.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[t[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[o]+"CancelAnimationFrame"]||window[t[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,o){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),a=window.setTimeout(function(){t(i+n)},n);return e=i+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();