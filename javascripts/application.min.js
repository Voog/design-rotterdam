var MMCQ,PriorityQueue;!function(t){t.fn.autogrow=function(e){return this.filter("textarea").each(function(){var e=this,o=t(e),n=o.height(),i=o.hasClass("autogrow-short")?0:parseInt(o.css("lineHeight"))||0,r=t("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:o.width(),fontSize:o.css("fontSize"),fontFamily:o.css("fontFamily"),fontWeight:o.css("fontWeight"),lineHeight:o.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),s=function(t){var s=e.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return function(t,e){for(var o=0,n="";o<e;o++)n+=t;return n}("&nbsp;",t.length-1)+" "});t&&t.data&&"keydown"===t.data.event&&13===t.keyCode&&(s+="<br />"),r.css("width",o.width()),r.html(s+(0===i?"...":"")),o.height(Math.max(r.height()+i,n))};o.change(s).keyup(s).keydown({event:"keydown"},s),t(window).resize(s),s()})}}(jQuery),PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var t,e,o,n,i,r;function s(){this.maxIterations=1e3,this.fractByPopulations=.75}return s.sigbits=5,s.rshift=8-s.sigbits,n=function(t,e,o){return(t<<2*s.sigbits)+(e<<s.sigbits)+o},t=function(){function t(t,e,o,n,i,r,s){this.r1=t,this.r2=e,this.g1=o,this.g2=n,this.b1=i,this.b2=r,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,o,i,r,s,a,c,d,l,h,u;if(!this._count_set||t){for(r=0,s=a=this.r1,l=this.r2;a<=l;s=a+=1)for(o=c=this.g1,h=this.g2;c<=h;o=c+=1)for(e=d=this.b1,u=this.b2;d<=u;e=d+=1)i=n(s,o,e),r+=this.histo[i]||0;this._count_set=!0,this._count=r}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,o,i,r,a,c,d,l,h,u,f,p,g,m,b,w;if(!this._average||t){for(d=1<<8-s.sigbits,u=0,h=0,r=0,o=0,l=f=this.r1,m=this.r2;f<=m;l=f+=1)for(i=p=this.g1,b=this.g2;p<=b;i=p+=1)for(e=g=this.b1,w=this.b2;g<=w;e=g+=1)c=n(l,i,e),u+=a=this.histo[c]||0,h+=a*(l+.5)*d,r+=a*(i+.5)*d,o+=a*(e+.5)*d;this._average=u?[~~(h/u),~~(r/u),~~(o/u)]:[~~(d*(this.r1+this.r2+1)/2),~~(d*(this.g1+this.g2+1)/2),~~(d*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,o,n;return n=t[0]>>s.rshift,o=t[1]>>s.rshift,e=t[2]>>s.rshift,this.r1<=n&&n<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=e&&e<=this.b2},t}(),e=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,n;return(o=t.count()*t.volume())>(n=e.count()*e.volume())?1:o<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,n;for(e=o=0,n=this.cboxes.size();o<n;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,n,i,r,s,a;for(r=function(t){return t*t},n=1e9,o=s=0,a=this.cboxes.size();s<a;o=s+=1)(e=Math.sqrt(r(t[0]-this.cboxes.peek(o).color[0])+r(t[1]-this.cboxes.peek(o).color[1])+r(t[2]-this.cboxes.peek(o).color[2])))<n&&(n=e,i=this.cboxes.peek(o).color);return i},t}(),i=function(t){var e,o,i,r,a,c,d,l,h;for(r=1<<3*s.sigbits,i=new Array(r),l=0,h=t.length;l<h;l++)d=(c=t[l])[0]>>s.rshift,o=c[1]>>s.rshift,e=c[2]>>s.rshift,i[a=n(d,o,e)]=(i[a]||0)+1;return i},o=function(e,o){var n,i,r,a,c,d,l,h,u,f,p,g;for(f=1e6,u=0,d=1e6,c=0,r=1e6,i=0,p=0,g=e.length;p<g;p++)h=(l=e[p])[0]>>s.rshift,a=l[1]>>s.rshift,n=l[2]>>s.rshift,h<f?f=h:h>u&&(u=h),a<d?d=a:a>c&&(c=a),n<r?r=n:n>i&&(i=n);return new t(f,u,d,c,r,i,o)},r=function(t,e){var o,i,r,s,a,c,d,l,h,u,f,p,g,m,b,w,v,y,C,x,_,k,A,j,M,z,P,F,T,H;if(e.count()){if(1===e.count())return[e.copy()];if(u=e.r2-e.r1+1,a=e.g2-e.g1+1,i=e.b2-e.b1+1,d=Math.max(u,a,i),p=0,l=[],c=[],d===u)for(h=g=e.r1,k=e.r2;g<=k;h=g+=1){for(f=0,s=m=e.g1,P=e.g2;m<=P;s=m+=1)for(o=b=e.b1,F=e.b2;b<=F;o=b+=1)f+=t[n(h,s,o)]||0;p+=f,l[h]=p}else if(d===a)for(s=w=e.g1,T=e.g2;w<=T;s=w+=1){for(f=0,h=v=e.r1,H=e.r2;v<=H;h=v+=1)for(o=y=e.b1,A=e.b2;y<=A;o=y+=1)f+=t[n(h,s,o)]||0;p+=f,l[s]=p}else for(o=C=e.b1,j=e.b2;C<=j;o=C+=1){for(f=0,h=x=e.r1,M=e.r2;x<=M;h=x+=1)for(s=_=e.g1,z=e.g2;_<=z;s=_+=1)f+=t[n(h,s,o)]||0;p+=f,l[o]=p}return l.forEach(function(t,e){return c[e]=p-t}),r=function(t){var o,n,i,r,s,a,d,h,u,f,g;for(a=t+"2",d=f=e[s=t+"1"],g=e[a];f<=g;d=f+=1)if(l[d]>p/2){for(o=e.copy(),n=e.copy(),r=(h=d-e[s])<=(u=e[a]-d)?Math.min(e[a]-1,~~(d+u/2)):Math.max(e[s],~~(d-1-h/2));!l[r];)r++;for(i=c[r];!i&&l[r-1];)i=c[--r];return o[a]=r,n[s]=o[a]+1,[o,n]}},d===u?r("r"):d===a?r("g"):d===i?r("b"):void 0}},s.prototype.quantize=function(t,n){var s,a,c,d,l,h,u=this;if(!t.length||n<2||n>256)return console.log("invalid arguments"),!1;for(c=i(t),s=o(t,c),(l=new PriorityQueue(function(t,e){var o,n;return(o=t.count())>(n=e.count())?1:o<n?-1:0})).push(s),(d=function(t,e){var o,n,i,a,d;for(a=1,d=0;d<u.maxIterations;)if((s=t.pop()).count()){if(o=(i=r(c,s))[0],n=i[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),n&&(t.push(n),a++),a>=e)return;if(d++>u.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),d++})(l,this.fractByPopulations*n),h=new PriorityQueue(function(t,e){var o,n;return(o=t.count()*t.volume())>(n=e.count()*e.volume())?1:o<n?-1:0});l.size();)h.push(l.pop());for(d(h,n-h.size()),a=new e;h.size();)a.push(h.pop());return a},s}.call(this),function(){window.ColorExtract=function(){function t(){}return t.getColorMap=function(t,e,o,n,i,r){var s,a,c,d,l,h,u,f,p,g;for(null==r&&(r=8),c=t.getContext("2d").getImageData(e,o,n,i).data,d=[],h=u=o,p=o+i;u<p;h=u+=1)for(a=h*n*4,l=f=e,g=e+n;f<g;l=f+=1)s=a+4*l,d.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(d,r)},t.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},t.extract=function(e,o,n){var i,r,s,a,c,d,l,h,u,f,p,g,m;for(o.width=25,o.height=25,o.getContext("2d").drawImage(e,0,0,o.width,o.height),(r=t.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),i=r[0].rgb,(l=t.getColorMap(o,0,0,e.width,e.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),h=0,f=0,g=l.length;f<g;f++)s=l[f],(a=t.colorDist(i,s.rgb))>h&&(h=a,c=s.rgb);for(h=0,p=0,m=l.length;p<m;p++)s=l[p],(a=t.colorDist(i,s.rgb))>h&&s.rgb!==c&&(h=a,d=s.rgb);return n({bgColor:(u=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(i),fgColor:u(c),fgColor2:u(d)})},t}()}.call(this),function(t){var e="placeholder"in document.createElement("input"),o=["-moz-box-sizing","-webkit-box-sizing","box-sizing","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","border-top-width","border-right-width","border-bottom-width","border-left-width","line-height","font-size","font-family","width","height","top","left","right","bottom"];t.fn.placeholder=function(n){var i=this;return n=n||{},e&&!n.force?this:(window.setTimeout(function(){i.each(function(){var e=this.tagName.toLowerCase();"input"!==e&&"textarea"!==e||function(e,n){var i,r,s,a,c,d,l,h=t(e);try{if(!h[0].getAttributeNode("placeholder"))return;if(!(r=h[0].getAttribute("placeholder"))||!r.length)return;h[0].setAttribute("placeholder",""),h.data("placeholder",r)}catch(t){return}for(s={},i=0;i<o.length;i++)s[o[i]]=h.css(o[i]);function u(){l.toggle(!t.trim(h.val()).length)}a=parseInt(h.css("z-index"),10),!isNaN(a)&&a||(a=1),(l=t("<span>").addClass("placeholder").html(r)).css(s),l.css({cursor:h.css("cursor")||"text",display:"block",position:"absolute",overflow:"hidden","z-index":a+1,background:"none","border-top-style":"solid","border-right-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-top-color":"transparent","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"transparent"}),l.insertBefore(h),d=h.offset().top-l.offset().top,c=parseInt(l.css("margin-top")),isNaN(c)&&(c=0),l.css("margin-top",c+d),l.on("mousedown",function(){h.is(":enabled")&&window.setTimeout(function(){h.trigger("focus")},0)}),h.on("focus.placeholder",function(){l.hide()}),h.on("blur.placeholder",function(){u()}),h[0].onpropertychange=function(){"value"===event.propertyName&&u()},h.trigger("blur.placeholder")}(this)})},0),this)}}(jQuery),function(t){var e=function(e){this.$el=t(e),this.init()};e.prototype={init:function(){t(".form_field").each(t.proxy(function(e,o){t(o).find('input[type="text"]').length>0&&(t(o).find('input[type="text"]').attr("placeholder",t(o).find("label").text()),t(o).find("label").hide(),t.fn.placeholder&&t(o).find('input[type="text"]').placeholder()),t(o).find("textarea").length>0&&(t(o).find("textarea").attr("placeholder",t(o).find("label").text()),t(o).find("label").hide(),t.fn.placeholder&&t(o).find("textarea").placeholder())},this))}},t.fn.edicyFormPlaceholders=function(){return this.each(function(){t(this).data("edicyFormPlaceholders")||t(this).data("edicyFormPlaceholders",new e(this))})}}(jQuery),function(t){var e=function(e){var o,n,i,r,s=e.stickyHeader||!1,a=e.stickyMobileMenu||!1,c=e.stickyFooter||!1,d=e.stickyPostHeaders||!1,l=t(".container"),h=t(".header"),u=t(".footer"),f=t(h).height()+90,p=t(u).height()+90,g=!1,m=function(){var e=[];return t(".post").each(function(t,o){e.push(o.getBoundingClientRect().top)}),e},b=function(e){o?(n=t(window).scrollTop(),i=n-o,window.innerWidth<640&&a&&(i>5&&o>f?t(".topbar").addClass("fixed").css({top:-f}):i<-5&&o>f?t(".topbar").addClass("fixed").css({top:0}):i<0&&o<=100&&!0===t(".topbar").hasClass("fixed")&&(t(l).css({"margin-top":0}),t(".topbar").removeClass("fixed"))),window.innerWidth>640&&c&&(t(".post").eq(0).offset().top-t(window).innerHeight()+90<t(document).scrollTop()&&o+window.innerHeight<=t(document).height()-p-40?i<-5?_(!1):i>5&&C():x()),s&&t(h).find(".header-inner").height()<60&&(i>5&&o>f?w():i<-5&&o>f?(v(),setTimeout(function(){t(window).scrollTop()<=f&&y()},20)):i<-5&&o<=f&&y()),o=0):o=t(window).scrollTop(),window.innerWidth>640&&d&&t(".post").each(function(o,n){var i=t(n).find(".post-header"),r=-(t(n).height()-30-i.height());e[o]<30?e[o]>r?(i.removeClass("top bottom"),t(n).addClass("fixed-header")):(i.addClass("bottom").removeClass("top"),t(n).removeClass("fixed-header")):(i.addClass("top").removeClass("bottom"),t(n).removeClass("fixed-header"))})},w=function(){t(h).addClass("header-fixed").css({top:-f}),t(l).css({"padding-top":f})},v=function(){var e;e=t("body").hasClass("edy-checkout-button-visible")?t(".edy-ecommerce-shopping-cart-button").outerHeight():0,t(h).addClass("header-fixed header-animated").css({top:e}),t(l).css({"padding-top":f})},y=function(){t(h).removeClass("header-fixed header-animated"),t(l).css({"padding-top":0}),t(".post.fixed-header").removeClass("fixed-header")},C=function(){t(u).addClass("footer-fixed footer-animated footer-hidden"),t(u).css("bottom",-t(u).outerHeight())},x=function(){t(u).removeClass("footer-fixed footer-animated footer-hidden"),t("body").removeClass("voog-search-visible"),t(u).css({bottom:"",left:""}),t(l).css({"margin-bottom":""})},_=function(e){e=e||!1,t(u).addClass("footer-fixed footer-animated"),t(u).css({left:t(".container").offset().left,bottom:e?0:60-t(u).height()}),t(l).css({"margin-bottom":p})},k=function(e){e?t(u).hasClass("footer-fixed")&&(clearTimeout(r),_(!0),t("footer .gradient-overlay").hide()):t("footer").hasClass("footer-fixed")&&(r=setTimeout(function(){_(!1),t("footer .gradient-overlay").show()},1500))},A=function(){g||requestAnimationFrame(j),g=!0},j=function(){g=!1,t(window).width()>640&&b(m())};t(window).on("load resize",function(){t(window).width()>640?b(m()):(t(".container").css({"padding-top":"","margin-bottom":""}),t(".header-fixed").removeClass("header-fixed header-animated").css("top",""))}).on("scroll",function(){window.scrollY,A()}),t("footer").bind("mouseenter",function(){k(!0)}).bind("mouseleave",function(){k(!1)})},o=function(){t(document).ready(function(){setTimeout(function(){t(".js-content-item-box").addClass("not-loaded")},3e3)}),t(".js-lazyload").lazyload({threshold:500,effect:"fadeIn",placeholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",load:function(){var e=t(this).closest(".js-content-item-box");e.removeClass("not-loaded with-error").addClass("is-loaded"),setTimeout(function(){e.removeClass("not-loaded with-error"),e.find(".js-loader").remove()},3e3)}})};window.site=t.extend(window.site||{},{initFrontPage:function(t){(t=void 0!==t&&t)&&e({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1})},initCommonPage:function(o){(o=void 0!==o&&o)&&e({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),t.fn.autogrow&&t(".form_field_textarea").autogrow(),t(window).ready(function(){t.trim(t(".content-header").get(0).innerHTML)||t(".content-header").hide()})},initBlogPage:function(o){(o=void 0!==o&&o)&&e({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!0,stickyPostHeaders:!0}),t(window).ready(function(){t(".post").each(function(e,o){var n=t(o),i=n.find(".post-header").height();n.find(".post-content").css("min-height",i)})})},initArticlePage:function(o){(o=void 0!==o&&o)&&e({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),t.fn.autogrow&&t(".form_field_textarea").autogrow()},getImageByWidth:function(t,e){for(var o,n=0,i=t.length;n<i;n++){if(t[n].width<e)return o||t[n];o=t[n]}return t[t.length-1]},initItemsPage:function(){o()},handleHeaderColorScheme:function(e){void 0!==e&&(e>.6?t(".header-wrapper").addClass("light").removeClass("dark"):t(".header-wrapper").addClass("dark").removeClass("light"))},bindRootItemSettings:function(e){"show_product_related_pages_in_main_menu"in e||(e.show_product_related_pages_in_main_menu=!1),t(".js-root-item-settings-toggle").each(function(o,n){new Edicy.SettingsEditor(n,{menuItems:[{titleI18n:"show_in_main_menu",type:"checkbox",key:"show_product_related_pages_in_main_menu",states:{on:!0,off:!1}}],buttonTitleI18n:"settings",values:e,containerClass:["js-root-item-settings-popover","js-prevent-sideclick"],preview:function(e){1==!e.show_product_related_pages_in_main_menu?t(".js-menu-item-products").addClass("is-hidden"):t(".js-menu-item-products").removeClass("is-hidden")},commit:function(t){siteData.set("settings_root_item",t)}})})},bindContentItemImageCropToggle:function(){t(".js-toggle-crop-state").on("click",function(){var e,o=t(this).closest(".js-content-item-box"),n=o.find(".js-content-item-img-drop-area"),i=o.data("item-id"),r=o.data("item-type"),s=new Edicy.CustomData({type:r,id:i});n.hasClass("is-cropped")?(n.removeClass("is-cropped").addClass("not-cropped"),e="not-cropped"):(n.removeClass("not-cropped").addClass("is-cropped"),e="is-cropped"),s.set("image_crop_state",e)})},bindSiteSearch:function(e,o,n){e&&new VoogSearch(e,{per_page:10,lang:o,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:n})}}),t(".js-menu-toggle").click(function(){t(this).toggleClass("open"),t(".mobile-menu").toggleClass("expanded"),t(this).hasClass("open")?t(".js-search").addClass("hidden"):t(".js-search").removeClass("hidden")}),t("#lang-menu-toggle").click(function(e){e.stopPropagation(),t(this).toggleClass("open"),t("#toggleable-lang-menu").toggleClass("expanded")}),t("body").on("click",function(e){var o=t(e.target);0!==o.closest(".toggleable-lang-menu").length||o.is("#toggleable-lang-menu")||(t("#toggleable-lang-menu").removeClass("expanded"),t("body").removeClass("voog-search-visible")),t("#lang-menu-toggle").removeClass("open")}),t("html").click(function(e){var o=t(e.target);0===o.closest(".mobile-menu").length&&0===o.closest(".toggle-btn").length&&t(".mobile-menu").hasClass("expanded")&&(t(".mobile-menu").removeClass("expanded"),t(".js-menu-toggle").removeClass("open"),t(".js-menu-toggle").hasClass("open")||t(".js-search").removeClass("hidden"))}),t(".js-search-reset").click(function(e){e.preventDefault(),t("body").removeClass("voog-search-visible")}),t(".js-search-open").click(function(e){e.stopPropagation(),t("body").addClass("voog-search-visible"),t(".js-search-input").val("").focus()}),t(".js-search-close").click(function(e){t("body").removeClass("voog-search-visible")}),t(".js-search-input").click(function(t){t.stopPropagation()}),t(".js-voog-search-modal-inner").click(function(t){t.stopPropagation()}),t.each(t(".content-formatted table"),function(){t(this).wrap('<div class="table-container"></div>')}),t(document).ready(function(){t(".comment-form").hasClass("form_with_errors")?t("html, body").scrollTop(t(".comment-form").offset().top):t("form").find(".form_error, .form_notice").length>0&&t("html, body").scrollTop(t(".form_error, .form_notice").closest("form").offset().top)}),t(".content form").edicyFormPlaceholders()}(jQuery),function(){for(var t=0,e=["ms","moz","webkit","o"],o=0;o<e.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[e[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[o]+"CancelAnimationFrame"]||window[e[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,o){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();